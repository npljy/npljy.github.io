<!DOCTYPE html><html lang="zh-CN" data-dark><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="format-detection" content="telephone=no"><meta name="description" content="前端搬砖大老，写写搬砖那些事儿"><meta name="msvalidate.01" content="0FE4D8B3381D3D87088996B886E1E2BD"><meta name="google-adsense-account" content="ca-pub-8385136408348258"><meta name="keywords" content="前端壹菜鸟, HTML,CSS,JavaScript,ES6+,Sass,Less,Stylus,PostCSS,BEM,TailwindCSS,Bootstrap,React,Vue.js,Angular,Svelte,TypeScript,Vite,Webpack,npm,Yarn,pnpm,Redux,Zustand,Pinia,ReactRouter,VueRouter,ESLint,Prettier,Git,Node.js,ReactNative,Flutter,Electron,Next.js,Nuxt.js,Micro-frontends,WebAssembly,PWA,Three.js,前端,技术博客,原创,FrontEnd,vue,echarts 3d"><title>vue中echarts的3D饼图实现 | 前端壹菜鸟</title><link rel="stylesheet" type="text/css" href="/css/normalize.min.css"><link rel="stylesheet" type="text/css" href="/css/pure-min.min.css"><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="/css/style.css"><link rel="icon" mask="" sizes="any" href="/img/blog.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/img/blog.ico"><link rel="apple-touch-icon" href="/img/blog.png"><link rel="apple-touch-icon-precomposed" href="/img/blog.png"><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/isPhone.js"></script><script type="text/javascript" src="/js/fixedPage.jm.js"></script><script type="text/javascript" src="/js/check.js"></script><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8385136408348258"></script><script>(function(){
  const bp = document.createElement('script');
  const curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https'){
    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  document.head.append(bp)
})();
</script><script async src="https://jspassport.ssl.qhimg.com/11.0.1.js?d182b3f28525f2db83acfaaf6e696dba"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-ETCMPGS7S6"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);};gtag('js',new Date());gtag('config','G-ETCMPGS7S6');
</script><script async src="https://hm.baidu.com/hm.js?011f0b44e8452bfa57fbfa23c5fe7683"></script><script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script><script>LA.init({id: 'JkUaixMjOhC8emNs', ck: 'JkUaixMjOhC8emNs', autoTrack:true})
</script><script type="application/ld+json">{
  "@context": "https://schema.org",
  "keywords": "HTML,CSS,JavaScript,ES6+,Sass,Less,Stylus,PostCSS,BEM,TailwindCSS,Bootstrap,React,Vue.js,Angular,Svelte,TypeScript,Vite,Webpack,npm,Yarn,pnpm,Redux,Zustand,Pinia,ReactRouter,VueRouter,ESLint,Prettier,Git,Node.js,ReactNative,Flutter,Electron,Next.js,Nuxt.js,Micro-frontends,WebAssembly,PWA,Three.js,前端,技术博客",
  "description": "前端搬砖大老，写写搬砖那些事儿",
  "operatingSystem": "Any",
  "permissions": "browser",
  "author": {
    "@type": "Person",
    "name": "前端壹菜鸟"
  },
  "@graph": [{
    "@type": "WebSite",
    "name": "前端壹菜鸟",
    "url": "https://xuehuayu.cn",
  }, {
    "@type": "WebSite",
    "name": "前端壹菜鸟",
    "url": "https://cainiaoblog.cn",
  }, ]
}</script><meta name="generator" content="Hexo 8.1.1"></head><body><div class="body_container"><div id="webtraf_17015" style="width:100%;display:flex;justify-content: center;"><script src="https://webtrafic.ru/ads.php?uid=17015" async></script></div><div id="header"><div class="site-name"><a id="logo" href="/.">前端壹菜鸟</a><p class="description">关注前端知识，收集精彩博文，做技术的搬运工</p></div><div id="nav-menu"><a class="current" id="" href="/." target="_self"><i class="fa fa-home"> 首页</i></a><a id="" href="/archives/" target="_self"><i class="fa fa-archive"> 归档</i></a><a id="" href="/guestbook/" target="_self"><i class="fa fa-comments"> 留言</i></a><a id="" href="https://afdian.com/a/big_old/thank" target="_self"><i class="fa fa-group"> 感谢</i></a><a id="" href="/love/" target="_self"><i class="fa fa-heart"> LOVE</i></a><a id="area" href="/area" target="_self" style="display:none;"><i class="fa fa-internet-explorer"> Area</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title c-post">vue中echarts的3D饼图实现</h1><div class="post-meta"><span class="date">2024-09-12</span><span> | </span><span class="original">原创 </span><span> | </span><span class="category"><a href="/categories/%E5%89%8D%E7%AB%AF/">前端 </a><a href="/categories/FrontEnd/">FrontEnd </a></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 1.9k</span><span class="post-meta-item-text"> 字</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-hourglass-half"></i><span class="post-count"> 10</span><span class="post-meta-item-text"> 分钟</span></span></span></div><a class="disqus-comment-count" href="/article/7fb2c15c.html#waline-comment"><span class="waline-comment-count" data-path="/article/7fb2c15c.html">0</span><span> 条评论</span></a><div class="post-content"><p>vue中echarts的3D饼图实现</p>
<span id="more"></span>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">/**</span><br><span class="line">  - props: 未列出的props与原Chart组件相同</span><br><span class="line">  - height: 高度</span><br><span class="line">  - data: 格式化后的数据，不是chart option</span><br><span class="line">  - option：同 data，取此名是为方便直接修改2D组件为3D组件而不用修改props字段</span><br><span class="line">  - distance: 视角距离，值越大饼图越小，默认200</span><br><span class="line">  - position: [left, top] 饼图位置，取值：百分比|数字字符串，默认值[&#x27;-25%&#x27;, &#x27;0&#x27;]</span><br><span class="line">  - tipField: 饼图鼠标划过百分比取值字段，默认 rate || LZ</span><br><span class="line">  - legendPosition: [left, top] legend位置，取值：百分比|数字字符串，默认 [&#x27;50%&#x27;, &#x27;height/5.5&#x27;]</span><br><span class="line">  - legendRich: legend rich，默认值请在下面代码中查看</span><br><span class="line">  - legendFormatter(name, data): legend formatter，data即格式化后的数据，默认值请在下面代码中查看</span><br><span class="line">  - autoRotate: 自动旋转, 默认 false</span><br><span class="line">  */</span><br><span class="line"></span><br><span class="line">import isEqual from &#x27;lodash/isEqual&#x27;</span><br><span class="line">import isEmpty from &#x27;lodash/isEmpty&#x27;</span><br><span class="line">import find from &#x27;lodash/find&#x27;</span><br><span class="line">import colors from &#x27;@/comp/colors&#x27;</span><br><span class="line"></span><br><span class="line">function fixedUnit(num = 0) &#123;</span><br><span class="line">  if (isNaN(num)) num = 0</span><br><span class="line">  num = Math.abs(num)</span><br><span class="line">  if (num &gt; 1e4) &#123;</span><br><span class="line">    return &#x27;万&#x27;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return &#x27;&#x27;</span><br><span class="line">&#125;</span><br><span class="line">function fixed4(num) &#123;</span><br><span class="line">  if (isNaN(num) || num == null) return &#x27;-&#x27;</span><br><span class="line">  let flag = false</span><br><span class="line">  if (num &lt; 0) &#123;</span><br><span class="line">    num = Math.abs(num)</span><br><span class="line">    flag = true</span><br><span class="line">  &#125;</span><br><span class="line">  if (num &gt; 1e4) &#123;</span><br><span class="line">    num = parseInt(num / 1e2) / 100</span><br><span class="line">  &#125;</span><br><span class="line">  return ((flag ? &#x27;-&#x27; : &#x27;&#x27;) + num) * 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function getParametricEquation(startRatio, endRatio, isSelected, isHovered, k,</span><br><span class="line">height) &#123;</span><br><span class="line">  // 计算</span><br><span class="line">  const midRatio = (startRatio + endRatio) / 2</span><br><span class="line">  const startRadian = startRatio * Math.PI * 2</span><br><span class="line">  const endRadian = endRatio * Math.PI * 2</span><br><span class="line">  const midRadian = midRatio * Math.PI * 2</span><br><span class="line"></span><br><span class="line">  // 如果只有一个扇形，则不实现选中效果。</span><br><span class="line">  if (startRatio === 0 &amp;&amp; endRatio === 1) &#123;</span><br><span class="line">    isSelected = false</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 通过扇形内径/外径的值，换算出辅助参数 k（默认值 1/3）</span><br><span class="line">  k = k ?? 1 / 3</span><br><span class="line"></span><br><span class="line">  // 计算选中效果分别在 x 轴、y 轴方向上的位移（未选中，则位移均为 0）</span><br><span class="line">  const offsetX = isSelected ? Math.cos(midRadian) * 0.1 : 0</span><br><span class="line">  const offsetY = isSelected ? Math.sin(midRadian) * 0.1 : 0</span><br><span class="line"></span><br><span class="line">  // 计算高亮效果的放大比例（未高亮，则比例为 1）</span><br><span class="line">  const hoverRate = isHovered ? 1.1 : 1</span><br><span class="line"></span><br><span class="line">  // 返回曲面参数方程</span><br><span class="line">  return &#123;</span><br><span class="line">    u: &#123;</span><br><span class="line">      min: -Math.PI,</span><br><span class="line">      max: Math.PI * 3,</span><br><span class="line">      step: Math.PI / 32,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    v: &#123;</span><br><span class="line">      min: 0,</span><br><span class="line">      max: Math.PI * 2,</span><br><span class="line">      step: Math.PI / 20,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    x: function (u, v) &#123;</span><br><span class="line">      if (u &lt; startRadian) &#123;</span><br><span class="line">        return offsetX + Math.cos(startRadian) * (1 + Math.cos(v) * k) * hoverRate</span><br><span class="line">      &#125;</span><br><span class="line">      if (u &gt; endRadian) &#123;</span><br><span class="line">        return offsetX + Math.cos(endRadian) * (1 + Math.cos(v) * k) * hoverRate</span><br><span class="line">      &#125;</span><br><span class="line">      return offsetX + Math.cos(u) * (1 + Math.cos(v) * k) * hoverRate</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    y: function (u, v) &#123;</span><br><span class="line">      if (u &lt; startRadian) &#123;</span><br><span class="line">        return offsetY + Math.sin(startRadian) * (1 + Math.cos(v) * k) * hoverRate</span><br><span class="line">      &#125;</span><br><span class="line">      if (u &gt; endRadian) &#123;</span><br><span class="line">        return offsetY + Math.sin(endRadian) * (1 + Math.cos(v) * k) * hoverRate</span><br><span class="line">      &#125;</span><br><span class="line">      return offsetY + Math.sin(u) * (1 + Math.cos(v) * k) * hoverRate</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    z: function (u, v) &#123;</span><br><span class="line">      if (u &lt; -Math.PI * 0.5) &#123;</span><br><span class="line">        return Math.sin(u)</span><br><span class="line">      &#125;</span><br><span class="line">      if (u &gt; Math.PI * 2.5) &#123;</span><br><span class="line">        return Math.sin(u)</span><br><span class="line">      &#125;</span><br><span class="line">      return Math.sin(v) &gt; 0 ? 1 * height : -1</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 生成模拟 3D 饼图的配置项</span><br><span class="line">function getPie3D(&#123;</span><br><span class="line">  pieData,</span><br><span class="line">  tipField,</span><br><span class="line">  position,</span><br><span class="line">  legendPosition,</span><br><span class="line">  legendRich,</span><br><span class="line">  legendFormatter,</span><br><span class="line">  autoRotate,</span><br><span class="line">  boxHeight,</span><br><span class="line">  distance,</span><br><span class="line">  internalDiameterRatio,</span><br><span class="line">&#125;) &#123;</span><br><span class="line">  const series = []</span><br><span class="line">  let sumValue = 0</span><br><span class="line">  let startValue = 0</span><br><span class="line">  let endValue = 0</span><br><span class="line">  const legendData = []</span><br><span class="line">  const k =</span><br><span class="line">    typeof internalDiameterRatio !== &#x27;undefined&#x27; ? (1 - internalDiameterRatio) / (1 + internalDiameterRatio) : 1 / 3</span><br><span class="line"></span><br><span class="line">  // 为每一个饼图数据，生成一个 series-surface 配置</span><br><span class="line">  for (let i = 0; i &lt; pieData.length; i++) &#123;</span><br><span class="line">    sumValue += pieData[i].value * 1</span><br><span class="line"></span><br><span class="line">    const seriesItem = &#123;</span><br><span class="line">      name: pieData[i].name ?? `series$&#123;i&#125;`,</span><br><span class="line">      type: &#x27;surface&#x27;,</span><br><span class="line">      parametric: true,</span><br><span class="line">      wireframe: &#123;</span><br><span class="line">        show: false,</span><br><span class="line">      &#125;,</span><br><span class="line">      pieData: pieData[i],</span><br><span class="line">      pieStatus: &#123;</span><br><span class="line">        selected: false,</span><br><span class="line">        hovered: false,</span><br><span class="line">        k,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (!pieData[i].itemStyle) &#123;</span><br><span class="line">      const itemStyle = &#123;&#125;</span><br><span class="line"></span><br><span class="line">      if (!pieData[i].itemStyle.color) &#123;</span><br><span class="line">        itemStyle.color = pieData[i].itemStyle.color</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        itemStyle.color = colors[i]</span><br><span class="line">      &#125;</span><br><span class="line">      if (!pieData[i].itemStyle.opacity) &#123;</span><br><span class="line">        itemStyle.opacity = pieData[i].itemStyle.opacity</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        itemStyle.opacity = 1</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      seriesItem.itemStyle = itemStyle</span><br><span class="line">    &#125;</span><br><span class="line">    series.push(seriesItem)</span><br><span class="line">  &#125;</span><br><span class="line">  // 使用上一次遍历时，计算出的数据和 sumValue，调用 getParametricEquation 函数，</span><br><span class="line">  // 向每个 series-surface 传入不同的参数方程 series-surface.parametricEquation，也就是实现每一个扇形。</span><br><span class="line">  const isZero = pieData.every((e) =&gt; e.value * 1 === 0)</span><br><span class="line">  const len = series.length || 1</span><br><span class="line">  for (let i = 0; i &lt; len; i++) &#123;</span><br><span class="line">    if (!series[i]?.pieData) series[i].pieData = &#123;&#125;</span><br><span class="line">    if (isZero) &#123;</span><br><span class="line">      series[i].pieData.startRatio = i / len</span><br><span class="line">      series[i].pieData.endRatio = i === len - 1 ? 1 : (i + 1) / len</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      endValue = startValue * 1 + (series[i]?.pieData.value || 0) * 1</span><br><span class="line">      series[i].pieData.startRatio = startValue / sumValue</span><br><span class="line">      series[i].pieData.endRatio = i === len - 1 ? 1 : endValue / sumValue</span><br><span class="line">    &#125;</span><br><span class="line">    series[i].parametricEquation = getParametricEquation(</span><br><span class="line">      series[i].pieData.startRatio,</span><br><span class="line">      series[i].pieData.endRatio,</span><br><span class="line">      false,</span><br><span class="line">      false,</span><br><span class="line">      k,</span><br><span class="line">      4000</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    startValue = endValue</span><br><span class="line"></span><br><span class="line">    legendData.push(series[i].name)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // series.push(&#123;</span><br><span class="line">  // name: &#x27;pie2d&#x27;,</span><br><span class="line">  // type: &#x27;pie&#x27;,</span><br><span class="line">  // label: &#123;</span><br><span class="line">  // opacity: 1,</span><br><span class="line">  // position: &#x27;outside&#x27;,</span><br><span class="line">  // fontSize: 12,</span><br><span class="line">  // lineHeight: 20,</span><br><span class="line">  // textStyle: &#123;</span><br><span class="line">  // fontSize: 12,</span><br><span class="line">  // color: &#x27;#fff&#x27;,</span><br><span class="line">  // &#125;,</span><br><span class="line">  // &#125;,</span><br><span class="line">  // labelLine: &#123;</span><br><span class="line">  // length: 30,</span><br><span class="line">  // length2: 30,</span><br><span class="line">  // &#125;,</span><br><span class="line">  // minAngle: 10,</span><br><span class="line">  // startAngle: 50, // 起始角度，支持范围[0, 360]。</span><br><span class="line">  // clockwise: false, // 饼图的扇区是否是顺时针排布。上述这两项配置主要是为了对齐3d的样式</span><br><span class="line">  // radius: [&#x27;60%&#x27;, &#x27;60%&#x27;],</span><br><span class="line">  // center: [&#x27;30%&#x27;, &#x27;50%&#x27;],</span><br><span class="line">  // data: pieData.map((item) =&gt; &#123;</span><br><span class="line">  // item.itemStyle.opacity = 0</span><br><span class="line">  // return item</span><br><span class="line">  // &#125;),</span><br><span class="line">  // &#125;)</span><br><span class="line"></span><br><span class="line">  // 准备待返回的配置项，把准备好的 legendData、series 传入。</span><br><span class="line">  const option = &#123;</span><br><span class="line">    animation: true,</span><br><span class="line">    color: colors,</span><br><span class="line">    backgroundColor: &#x27;rgba(0,0,0,0)&#x27;,</span><br><span class="line">    // 图例组件</span><br><span class="line">    legend: &#123;</span><br><span class="line">      data: legendData,</span><br><span class="line">      // 图例列表的布局朝向。</span><br><span class="line">      orient: &#x27;vertical&#x27;,</span><br><span class="line">      left: legendPosition[0] ?? &#x27;50%&#x27;,</span><br><span class="line">      top: legendPosition[1] ?? boxHeight / 5.5,</span><br><span class="line">      // 图例文字每项之间的间隔</span><br><span class="line">      itemGap: 5,</span><br><span class="line">      show: true,</span><br><span class="line">      icon: &#x27;rect&#x27;,</span><br><span class="line">      itemHeight: 10,</span><br><span class="line">      itemWidth: 10,</span><br><span class="line">      textStyle: &#123;</span><br><span class="line">        // 图例字体大小</span><br><span class="line">        fontSize: 12,</span><br><span class="line">        color: &#x27;#B8DDFF&#x27;,</span><br><span class="line">        lineHeight: 14,</span><br><span class="line">        rich: legendRich,</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      // 格式化图例文本</span><br><span class="line">      formatter: function (name) &#123;</span><br><span class="line">        return legendFormatter(name, pieData)</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    tooltip: &#123;</span><br><span class="line">      formatter: (params) =&gt; &#123;</span><br><span class="line">        if (params.seriesName !== &#x27;mouseoutSeries&#x27; &amp;&amp; params.seriesName !== &#x27;pie2d&#x27;) &#123;</span><br><span class="line">          const item = option.series[params.seriesIndex]?.pieData || &#123;&#125;</span><br><span class="line">          const rate = item[tipField] ?? item?.rate ?? item?.LZ ?? &#x27;-&#x27;</span><br><span class="line">          return `$&#123;</span><br><span class="line">            params.seriesName</span><br><span class="line">          &#125;&lt;br/&gt;&lt;span style=&quot;display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:$&#123;</span><br><span class="line">            params.color</span><br><span class="line">          &#125;;&quot;&gt;&lt;/span&gt;$&#123;rate + &#x27;%&#x27;&#125;`</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      textStyle: &#123;</span><br><span class="line">        fontSize: 14,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    title: &#123;</span><br><span class="line">      x: &#x27;center&#x27;,</span><br><span class="line">      top: &#x27;20&#x27;,</span><br><span class="line">      textStyle: &#123;</span><br><span class="line">        color: &#x27;#fff&#x27;,</span><br><span class="line">        fontSize: 22,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    labelLine: &#123;</span><br><span class="line">      show: true,</span><br><span class="line">      lineStyle: &#123;</span><br><span class="line">        color: &#x27;#7BC0CB&#x27;,</span><br><span class="line">      &#125;,</span><br><span class="line">      normal: &#123;</span><br><span class="line">        show: true,</span><br><span class="line">        length: 10,</span><br><span class="line">        length2: 10,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    label: &#123;</span><br><span class="line">      show: true,</span><br><span class="line">      position: &#x27;outside&#x27;,</span><br><span class="line">      formatter: &#x27;&#123;b&#125; \n&#123;d&#125;%&#x27;,</span><br><span class="line">      textStyle: &#123;</span><br><span class="line">        color: &#x27;#fff&#x27;,</span><br><span class="line">        fontSize: &#x27;12px&#x27;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    xAxis3D: &#123;</span><br><span class="line">      min: -1,</span><br><span class="line">      max: 1,</span><br><span class="line">    &#125;,</span><br><span class="line">    yAxis3D: &#123;</span><br><span class="line">      min: -1,</span><br><span class="line">      max: 1,</span><br><span class="line">    &#125;,</span><br><span class="line">    zAxis3D: &#123;</span><br><span class="line">      min: -1,</span><br><span class="line">      max: 1,</span><br><span class="line">    &#125;,</span><br><span class="line">    grid3D: &#123;</span><br><span class="line">      show: false,</span><br><span class="line">      boxHeight: 0.01,</span><br><span class="line">      left: position[0] ?? &#x27;-25%&#x27;,</span><br><span class="line">      top: position[1] ?? &#x27;0&#x27;,</span><br><span class="line">      // environment: &#x27;rgba(0,0,0,0)&#x27;,</span><br><span class="line">      viewControl: &#123;</span><br><span class="line">        distance,</span><br><span class="line">        alpha: 35,</span><br><span class="line">        beta: 60,</span><br><span class="line">        autoRotate, // 自动旋转</span><br><span class="line">        zoomSensitivity: false,</span><br><span class="line">        rotateSensitivity: false,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    series: series,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return option</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function bindListen(</span><br><span class="line">  chart,</span><br><span class="line">  data,</span><br><span class="line">  distance,</span><br><span class="line">  position,</span><br><span class="line">  tipField,</span><br><span class="line">  legendPosition,</span><br><span class="line">  legendRich,</span><br><span class="line">  legendFormatter,</span><br><span class="line">  autoRotate,</span><br><span class="line">  boxHeight</span><br><span class="line">) &#123;</span><br><span class="line">  chart.setOption(</span><br><span class="line">    getPie3D(&#123;</span><br><span class="line">      pieData: data,</span><br><span class="line">      tipField,</span><br><span class="line">      position,</span><br><span class="line">      legendPosition,</span><br><span class="line">      legendRich,</span><br><span class="line">      legendFormatter,</span><br><span class="line">      autoRotate,</span><br><span class="line">      boxHeight,</span><br><span class="line">      distance,</span><br><span class="line">      internalDiameterRatio: 0.6,</span><br><span class="line">    &#125;)</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    reset: &#123;</span><br><span class="line">      type: Boolean,</span><br><span class="line">      default: true,</span><br><span class="line">    &#125;,</span><br><span class="line">    height: &#123;</span><br><span class="line">      type: Number,</span><br><span class="line">      default: 400,</span><br><span class="line">    &#125;,</span><br><span class="line">    option: &#123;</span><br><span class="line">      type: Array,</span><br><span class="line">      default: () =&gt; [],</span><br><span class="line">    &#125;,</span><br><span class="line">    data: &#123;</span><br><span class="line">      type: Array,</span><br><span class="line">      default: () =&gt; [],</span><br><span class="line">    &#125;,</span><br><span class="line">    distance: &#123;</span><br><span class="line">      type: [Number, String],</span><br><span class="line">      default: 200,</span><br><span class="line">    &#125;,</span><br><span class="line">    position: &#123;</span><br><span class="line">      type: Array,</span><br><span class="line">      default: () =&gt; [],</span><br><span class="line">    &#125;,</span><br><span class="line">    tipField: &#123;</span><br><span class="line">      type: String,</span><br><span class="line">      default: &#x27;&#x27;,</span><br><span class="line">    &#125;,</span><br><span class="line">    legendPosition: &#123;</span><br><span class="line">      type: Array,</span><br><span class="line">      default: () =&gt; [],</span><br><span class="line">    &#125;,</span><br><span class="line">    legendRich: &#123;</span><br><span class="line">      type: Object,</span><br><span class="line">      default: () =&gt; (&#123;</span><br><span class="line">        one: &#123;</span><br><span class="line">          color: &#x27;#ffffff&#x27;,</span><br><span class="line">          width: 60,</span><br><span class="line">        &#125;,</span><br><span class="line">        two: &#123;</span><br><span class="line">          color: &#x27;#59caf0&#x27;,</span><br><span class="line">          fontSize: 18,</span><br><span class="line">          fontWeight: 600,</span><br><span class="line">        &#125;,</span><br><span class="line">        three: &#123;</span><br><span class="line">          color: &#x27;#d7dcf2&#x27;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;),</span><br><span class="line">    &#125;,</span><br><span class="line">    legendFormatter: &#123;</span><br><span class="line">      type: Function,</span><br><span class="line">      default: (name, pieData) =&gt; &#123;</span><br><span class="line">        const item = find(pieData, [&#x27;name&#x27;, name])</span><br><span class="line">        return `&#123;one|$&#123;name&#125;&#125; &#123;two|$&#123;fixed4(item.value)&#125;&#125; &#123;three|$&#123;fixedUnit(item.value)&#125;个&#125;`</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    autoRotate: &#123;</span><br><span class="line">      type: Boolean,</span><br><span class="line">      default: false,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      chart: null,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    list() &#123;</span><br><span class="line">      if (!isEmpty(this.option)) return this.option</span><br><span class="line">      else if (!isEmpty(this.data)) return this.data</span><br><span class="line"></span><br><span class="line">      return []</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    list(n, o) &#123;</span><br><span class="line">      if (!isEqual(n, o)) &#123;</span><br><span class="line">        if (this.reset) &#123;</span><br><span class="line">          this.chart.clear()</span><br><span class="line">        &#125;</span><br><span class="line">        bindListen(</span><br><span class="line">          this.chart,</span><br><span class="line">          n,</span><br><span class="line">          this.distance * 1,</span><br><span class="line">          this.position,</span><br><span class="line">          this.tipField,</span><br><span class="line">          this.legendPosition,</span><br><span class="line">          this.legendRich,</span><br><span class="line">          this.legendFormatter,</span><br><span class="line">          this.autoRotate,</span><br><span class="line">          this.height</span><br><span class="line">        )</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    this.initChart()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    resize() &#123;</span><br><span class="line">      this.chart.resize()</span><br><span class="line">    &#125;,</span><br><span class="line">    clear() &#123;</span><br><span class="line">      const canvasArr = this.chart.getDom().getElementsByTagName(&#x27;canvas&#x27;)</span><br><span class="line">      for (const item of canvasArr) &#123;</span><br><span class="line">        const itemWebgl = item.getContext(&#x27;webgl&#x27;)</span><br><span class="line">        itemWebgl?.getExtension &amp;&amp; itemWebgl.getExtension(&#x27;WEBGL_lose_context&#x27;).loseContext()</span><br><span class="line">      &#125;</span><br><span class="line">      this.chart.clear()</span><br><span class="line">    &#125;,</span><br><span class="line">    initChart() &#123;</span><br><span class="line">      this.chart = this.$echarts.init(this.$refs.chart)</span><br><span class="line">      this.chart.resize()</span><br><span class="line">      window.addEventListener(&#x27;resize&#x27;, () =&gt; &#123;</span><br><span class="line">        this.chart.resize()</span><br><span class="line">      &#125;)</span><br><span class="line">      bindListen(</span><br><span class="line">        this.chart,</span><br><span class="line">        this.list,</span><br><span class="line">        this.distance * 1,</span><br><span class="line">        this.position,</span><br><span class="line">        this.tipField,</span><br><span class="line">        this.legendPosition,</span><br><span class="line">        this.legendRich,</span><br><span class="line">        this.legendFormatter,</span><br><span class="line">        this.autoRotate,</span><br><span class="line">        this.height</span><br><span class="line">      )</span><br><span class="line">      this.chart.off(&#x27;legendselectchanged&#x27;)</span><br><span class="line">      this.chart.on(&#x27;legendselectchanged&#x27;, (p) =&gt; &#123;</span><br><span class="line">        this.chart.setOption(&#123;</span><br><span class="line">          legend: &#123; selected: &#123; [p.name]: true &#125; &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">        if (this.$listeners[&#x27;legend&#x27;]) &#123;</span><br><span class="line">          this.$emit(&#x27;legend&#x27;, p)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div ref=&quot;chart&quot; :style=&quot;&#123; width: &#x27;100%&#x27;, height: height &lt;= 100 ? `$&#123;height&#125;%`</span><br><span class="line">: `$&#123;height&#125;px` &#125;&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</div><div class="related-posts-section"><h3 class="related-posts-title">📚 相关文章</h3><div class="related-posts-list"><a class="related-post-item" href="/article/ececceb2.html"><div class="related-post-title">前端面试时面试官想要听到什么答案（关于一些Vue的问题）</div><div class="related-post-meta"><time>2019-12-09</time><div class="related-post-categories"><span class="category-badge">前端</span><span class="category-badge">FrontEnd</span></div></div></a><a class="related-post-item" href="/article/47fe76f0.html"><div class="related-post-title">webpack打包之后js文件引用顺序错乱，vendor顺序错误</div><div class="related-post-meta"><time>2019-12-12</time><div class="related-post-categories"><span class="category-badge">前端</span><span class="category-badge">FrontEnd</span></div></div></a><a class="related-post-item" href="/article/507688e3.html"><div class="related-post-title">chrome调试技巧</div><div class="related-post-meta"><time>2020-01-09</time><div class="related-post-categories"><span class="category-badge">前端</span><span class="category-badge">FrontEnd</span></div></div></a><a class="related-post-item" href="/article/996a092f.html"><div class="related-post-title">如何优雅处理前端异常？</div><div class="related-post-meta"><time>2020-01-13</time><div class="related-post-categories"><span class="category-badge">前端</span><span class="category-badge">FrontEnd</span></div></div></a><a class="related-post-item" href="/article/68c9c2c2.html"><div class="related-post-title">使用 Vercel + Upstash Redis 搭建自己的加速缓存服务</div><div class="related-post-meta"><time>2025-11-21</time><div class="related-post-categories"><span class="category-badge">前端</span><span class="category-badge">Frontend</span><span class="category-badge">Redis</span><span class="category-badge">Vercel</span></div></div></a></div></div><iframe src="/donate/?AliPayQR=/img/AliPayQR.png&amp;WeChatQR=/img/WeChatQR.png&amp;UnionPayQR=null&amp;GitHub=null&amp;BTCQR=null&amp;BTCKEY=null&amp;PayPal=https://paypal.me/BigOldTwo&amp;afd=https://ifdian.net/order/create?user_id=1f326f88329e11eeb16752540025c377" style="overflow-x:hidden; overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;" frameborder="0" scrolling="no"></iframe><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>搬砖大老</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="/article/7fb2c15c.html">https://xuehuayu.cn/article/7fb2c15c.html</a></li><li class="post-copyright-license"><strong>版权声明：</strong>① 标为原创的文章为博主原创，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接。② 部分文章内容由 AI 生成，内容仅供参考，请仔细甄别。③ 标为转载的文章来自网络，已标明出处，<a href="mailto:boss@xuehuayu.cn">侵删</a>。</li></ul></div><br><div class="tags"><a href="/tags/vue/">vue</a><a href="/tags/echarts-3d/">echarts 3d</a></div><div class="post-nav"><a class="pre" href="/article/7beb973b.html">uniapp解决安卓targetSdkVersion升级为33导致通知权限置灰无法打开问题</a><a class="next" href="/article/e856e555.html">vue实现按钮切换背景移动效果</a></div><div id="waline-comment"></div><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@waline/client@v3/dist/waline.min.css"><script src="//cdn.jsdelivr.net/npm/@waline/client@v3/dist/waline.min.js"></script><script type="module">const { init } = await import('//cdn.jsdelivr.net/npm/@waline/client@v3/dist/waline.js');
const origin = window.location.origin
const serverURL = origin.includes('cainiaoblog') ? 'https://guest.cainiaoblog.cn' : 'https://guest.xuehuayu.cn'
const locale = {
  placeholder: '请正确填写昵称和邮箱，方便接收回复通知~',
  sofa: '沙发空缺中，还不快抢~',
  admin: '管理员'
};
init({
  el: '#waline-comment',
  serverURL: serverURL,
  locale,
  pageSize: '20',
  visitor: false == true, // 阅读量统计
  requiredMeta: ['nick', 'mail'],
  pageview: true,
  reaction: true,
  emoji: [
    '//cdn.jsdelivr.net/npm/@waline/emojis@1.4.0/qq',
    '//cdn.jsdelivr.net/npm/@waline/emojis@1.4.0/bmoji',
    '//cdn.jsdelivr.net/npm/@waline/emojis@1.4.0/bilibili',
    '//cdn.jsdelivr.net/npm/@waline/emojis@1.4.0/weibo',
    '//cdn.jsdelivr.net/npm/@waline/emojis@1.4.0/tieba',
    '//cdn.jsdelivr.net/npm/@waline/emojis@1.4.0/tw-emoji',
    '//cdn.jsdelivr.net/npm/@waline/emojis@1.4.0/alus',
    '//cdn.jsdelivr.net/npm/@waline/emojis@1.4.0/soul-emoji'
  ],
})</script></div></div></div><div class="pure-u-1 pure-u-md-1-4 fixed-search hidden_mid_and_down"><div id="sidebar"><script type="text/javascript" src="/js/search.js"></script><div class="widget widget-all-search"><div class="widget-search"><input class="search" type="radio" name="search" value="baidu" id="baidu" checked="checked"/><label class="label" for="baidu" title="百度全站搜索">百度</label><input class="search" type="radio" name="search" value="google" id="google"/><label class="label" for="google" title="谷歌全站搜索">谷歌</label><input class="search" type="radio" name="search" value="self" id="self"/><label class="label" for="self" title="使用站内搜索">站内</label></div><div class="widget" id="search"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="30" placeholder="百度全站搜索"/><input type="hidden" name="si" value="xuehuayu.cn"/><input type="hidden" name="cl" value="3"/><input type="hidden" name="ct" value="2097152"/><input type="hidden" name="s" value="on"/><input class="search-submit" type="submit" value=""/></form></div></div><script>$('input[type=radio][name=search]').change(function() {
  var val = $(this).val()
  var self = '<div class="search-form"><input id="local-search-input" placeholder="站内搜索，首次慢" type="search" name="q" results="0"><input class="search-submit" type="submit" value=""/><div id="local-search-result"></div></div>'
  var google = '<form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="q" maxlength="30" placeholder="谷歌全站搜索"><input type="hidden" name="sitesearch" value="xuehuayu.cn"><input class="search-submit" type="submit" value=""/></form>'
  var baidu = '<form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="30" placeholder="百度全站搜索"><input type="hidden" name="si" value="xuehuayu.cn"><input type="hidden" name="cl" value="3"><input type="hidden" name="ct" value="2097152"><input type="hidden" name="s" value="on"><input class="search-submit" type="submit" value=""/></form>'

  if (val === 'self') {
      $('#search').html(self)
      var search_path = 'search.xml';
      if (search_path.length == 0) {
        search_path = '//search.xml';
      }
      var path = '/' + search_path;
      searchFunc(path, 'local-search-input', 'local-search-result');
  } else if (val === 'baidu') {
      $('#search').html(baidu)
  } else if (val === 'google') {
      $('#search').html(google)
  }
})</script><div class="widget widget-wxmp"><img alt="微信公众号" width="100%" src="/img/mp-mini.png"/></div><div class="widget widget-recent-posts"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/article/90947add.html">又拍云注销账号退款结果</a></li><li class="post-list-item"><a class="post-list-link" href="/article/40a96678.html">又拍云注销账号退款：一场本不该如此“恶心”的用户告别</a></li><li class="post-list-item"><a class="post-list-link" href="/article/87ba5860.html">本站已全面接入腾讯edgeone</a></li><li class="post-list-item"><a class="post-list-link" href="/article/68c9c2c2.html">使用 Vercel + Upstash Redis 搭建自己的加速缓存服务</a></li><li class="post-list-item"><a class="post-list-link" href="/article/46124b4e.html">账号被封了？被担心，不是！是Cloudflare崩了！</a></li></ul></div><div class="widget widget-recent-comments"><div class="widget-title"><i class="fa fa-comment-o"> 最近评论</i></div><div class="waline-recent" id="waline-recent"></div></div><script type="module">const { RecentComments } = await import('//cdn.jsdelivr.net/npm/@waline/client@v3/dist/waline.js');
const origin = window.location.origin
const serverURL = origin.includes('cainiaoblog') ? 'https://guest.cainiaoblog.cn' : 'https://guest.xuehuayu.cn'

RecentComments({
  el: '#waline-recent',
  serverURL,
  count: 5,
}).then(({ comments }) => {
  const commentList = comments?.data.map(
    (comment) => {
      const cmts = ((comment||{}).comment || '').replace(/<\/?.*?>/g, '').replace(/\n/g, ' ')
      const time = ((comment||{}).insertedAt || '').substring(0, 10)
      const link = (comment||{}).link
      const info = link ? `<a class="flex-block align-center" href="${link}"><img class="comment-avatar" width="30" src="${comment.avatar}" alt="${comment.nick}"/><span class="comment-nick">${comment.nick}</span></a>` : `<img class="comment-avatar" width="30" src="${comment.avatar}" alt="${comment.nick}"/><span class="comment-nick">${comment.nick}</span>`
      const url = (comment||{}).url + '#' + (comment||{}).objectId
      return `<li class="comment-list-item"><div class="comment-top flex-block justify-between align-center"><div class="comment-info flex-block align-center">${info}</div><span>${time}</span></div><div class="comment-content"><a class="post-list-link line-3" href="${url}">${cmts}</a></div></li>`
    }
  );
  document.getElementById('waline-recent').innerHTML = `<url class="comment-list">${commentList.join('')}</ul>`
});</script><div class="widget widget-categories"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ADBlock/">ADBlock</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Blog/">Blog</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/CDN/">CDN</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/CDN/%E7%BD%91%E7%AB%99/">网站</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/FrontEnd/">FrontEnd</a><span class="category-list-count">277</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Games/">Games</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Games/World-of-Warcraft/">World of Warcraft</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Histiry/">Histiry</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hls/">Hls</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/KKPlayer/">KKPlayer</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/LiveTV/">LiveTV</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/M3U8/">M3U8</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Movies/">Movies</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Player/">Player</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/React/">React</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TV/">TV</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Vue3/">Vue3</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Webpack/">Webpack</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/World-of-Warcraft/">World of Warcraft</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/debugger/">debugger</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%B8%AA%E7%A8%8E/">个税</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%84%BF%E7%AB%A5/">儿童</a><span class="category-list-count">8</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%84%BF%E7%AB%A5/%E5%81%A5%E5%BA%B7/">健康</a><span class="category-list-count">8</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%84%BF%E7%AB%A5/%E5%81%A5%E5%BA%B7/Children/">Children</a><span class="category-list-count">8</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%84%BF%E7%AB%A5/%E5%81%A5%E5%BA%B7/Children/Health/">Health</a><span class="category-list-count">8</span></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%85%AC%E4%BC%97%E5%8F%B7/">公众号</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a><span class="category-list-count">293</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/FrontEnd/">FrontEnd</a><span class="category-list-count">15</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/FrontEnd/Chrome/">Chrome</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/FrontEnd/Class/">Class</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/FrontEnd/Git/">Git</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/FrontEnd/Map/">Map</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/FrontEnd/TypeScript/">TypeScript</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/FrontEnd/Vue3/">Vue3</a><span class="category-list-count">4</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/Frontend/">Frontend</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/Frontend/PDF/">PDF</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/Frontend/PDF/Image/">Image</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/Frontend/PDF/Image/%E8%AF%B7%E6%B1%82%E5%A4%B4/">请求头</a><span class="category-list-count">1</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/Frontend/Redis/">Redis</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/Frontend/Redis/Vercel/">Vercel</a><span class="category-list-count">1</span></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%8D%9A%E5%AE%A2/">博客</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%8E%86%E5%8F%B2/">历史</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%8E%86%E5%8F%B2/Histiry/">Histiry</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%8F%88%E6%8B%8D%E4%BA%91/">又拍云</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B9%BF%E5%91%8A%E8%BF%87%E6%BB%A4/">广告过滤</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BD%B1%E8%A7%86/">影视</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%92%AD%E6%94%BE%E5%99%A8/">播放器</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%96%B0%E5%8D%8E%E5%AD%97%E5%85%B8/">新华字典</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%96%B0%E5%8D%8E%E5%AD%97%E5%85%B8/%E5%8E%86%E5%8F%B2/">历史</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%96%B0%E5%8D%8E%E5%AD%97%E5%85%B8/%E5%8E%86%E5%8F%B2/%E6%96%87%E5%8C%96/">文化</a><span class="category-list-count">1</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B8%B8%E6%88%8F/">游戏</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%94%9F%E6%B4%BB/">生活</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%94%9F%E6%B4%BB/%E6%89%8B%E6%9C%BA/">手机</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%94%B5%E5%BD%B1/">电影</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%9B%B4%E6%92%AD/">直播</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%A5%9E%E8%AF%9D/">神话</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%B3%BB%E7%BB%9F/">系统</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%B3%BB%E7%BB%9F/System/">System</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%B3%BB%E7%BB%9F/System/Windows/">Windows</a><span class="category-list-count">1</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BD%91%E7%9B%98/">网盘</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%8A%82%E7%82%B9/">节点</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%A3%85%E4%BF%AE/">装修</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%AD%94%E5%85%BD%E4%B8%96%E7%95%8C/">魔兽世界</a><span class="category-list-count">2</span></li></ul></div><div class="widget widget-links"><div class="widget-title"><i class="fa fa-external-link"> 友链</i></div><ul><li><a href="https://ghfast.top/https://raw.githubusercontent.com/npljy/haoka/main/imgs/qrcode.jpg" title="运营商官方大流量手机卡" target="_blank">运营商官方大流量手机卡</a></li><li><a href="https://m3u8.xuehuayu.cn?utm_source=xuehuayu.cn&amp;utm_term=KKPlayer" title="M3U8加速播放器" target="_blank">M3U8加速播放器</a></li><li><a href="https://chrome.xuehuayu.cn?utm_source=xuehuayu.cn&amp;utm_term=KKPlayer" title="Chrome命令行参数生成器" target="_blank">Chrome命令行参数生成器</a></li><li><a href="https://laonongmin.online?utm_source=xuehuayu.cn&amp;utm_term=KKPlayer" title="KK Player" target="_blank">KK Player</a></li></ul></div><div class="widget widget-ip"><div class="widget-title"></div><img alt="info" width="100%" src="https://tool.lu/netcard/" onclick="window.open(&quot;https://laonongmin.online&quot;)"/></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer"><div class="flex-block justify-center align-center flex-wrap"><a class="gxba-link" id="gxba" rel="nofollow" target="_blank" href="http://beian.miit.gov.cn/">京ICP备20007647号-2</a><a class="gaba-link" id="gaba-link" rel="nofollow" target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010802031264"><img class="nofancybox" src="/img/gaba.png" alt=""/><span id="gaba">京公网安备 11010802031264号</span><span style="padding-right: 10px;"></span></a><span>Copyright © 2025 </span><a href="/." rel="nofollow">前端壹菜鸟. </a><script>(function(){
  var cnb =window.location.origin.includes('cainiaoblog')
  if (cnb) {
    var gxba =document.getElementById('gxba')
    var gaba =document.getElementById('gaba')
    var gabaLink =document.getElementById('gaba-link')
    gxba.innerText ='京ICP备20007647号-1'
    gaba.innerText ='京公网安备 11010802031254号'
    gabaLink.setAttribute('href','http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010802031254')
  }
})()</script></div><div><a class="flex-block justify-center align-center flex-wrap" rel="nofollow" title="51la网站统计" target="_blank" href="https://v6.51.la/s/Guz3lwHCsVme9Cu"><script id="LA-DATA-WIDGET" crossorigin="anonymous" charset="UTF-8" src="https://v6-widget.51.la/v6/JkUaixMjOhC8emNs/quote.js?theme=0&amp;f=12&amp;display=0,1,1,1,1,1,1,1"></script></a></div></div></div></div><a class="show" id="rocket" title="返回顶部" href="#top"></a><div class="darkmode-toggle" title="开灯/关灯">🌓</div><script type="text/javascript" src="/js/totop.js?v=9" async></script><script type="text/javascript" src="/js/dark.js?v=9" async></script><script type="text/javascript" src="/js/codeblock-resizer.js"></script><script type="text/javascript" src="/js/smartresize.js"></script></div></body><div class="footer-links"><i class="fa fa-external-link"> 友链</i><span>：</span><span class="link"><span class="gap gap-0">|</span><a href="https://ghfast.top/https://raw.githubusercontent.com/npljy/haoka/main/imgs/qrcode.jpg" title="运营商官方大流量手机卡" target="_blank">运营商官方大流量手机卡</a></span><span class="link"><span class="gap gap-1">|</span><a href="https://m3u8.xuehuayu.cn?utm_source=xuehuayu.cn&amp;utm_term=KKPlayer" title="M3U8加速播放器" target="_blank">M3U8加速播放器</a></span><span class="link"><span class="gap gap-2">|</span><a href="https://chrome.xuehuayu.cn?utm_source=xuehuayu.cn&amp;utm_term=KKPlayer" title="Chrome命令行参数生成器" target="_blank">Chrome命令行参数生成器</a></span><span class="link"><span class="gap gap-3">|</span><a href="https://laonongmin.online?utm_source=xuehuayu.cn&amp;utm_term=KKPlayer" title="KK Player" target="_blank">KK Player</a></span></div></html>